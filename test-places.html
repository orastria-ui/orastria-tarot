<!DOCTYPE html>
<html>
<head>
  <title>Test Places API</title>
  <style>
    body { font-family: sans-serif; padding: 40px; }
    input { padding: 12px; font-size: 16px; width: 300px; }
    #results { margin-top: 20px; padding: 20px; background: #f5f5f5; }
    .item { padding: 10px; border-bottom: 1px solid #ddd; cursor: pointer; }
    .item:hover { background: #e0e0e0; }
  </style>
</head>
<body>
  <h1>Test Places Autocomplete</h1>
  <input type="text" id="city-input" placeholder="Type a city name...">
  <div id="results"></div>
  <div id="log" style="margin-top:20px;color:#666;"></div>

  <script>
    const input = document.getElementById('city-input');
    const results = document.getElementById('results');
    const log = document.getElementById('log');
    
    let debounce;
    
    input.addEventListener('input', (e) => {
      clearTimeout(debounce);
      const query = e.target.value.trim();
      
      if (query.length < 2) {
        results.innerHTML = '<p>Type at least 2 characters...</p>';
        return;
      }
      
      log.textContent = 'Searching for: ' + query;
      
      debounce = setTimeout(async () => {
        try {
          const url = `https://orastria-api.orastria.workers.dev/places?input=${encodeURIComponent(query)}`;
          log.textContent = 'Fetching: ' + url;
          
          const response = await fetch(url);
          const data = await response.json();
          
          log.textContent = 'Response: ' + JSON.stringify(data).substring(0, 200) + '...';
          
          if (data.status === 'OK' && data.predictions) {
            results.innerHTML = data.predictions.map(p => 
              `<div class="item">${p.description}</div>`
            ).join('');
          } else {
            results.innerHTML = '<p>No results or error: ' + data.status + '</p>';
          }
        } catch (error) {
          log.textContent = 'Error: ' + error.message;
          results.innerHTML = '<p style="color:red;">Error: ' + error.message + '</p>';
        }
      }, 300);
    });
  </script>
</body>
</html>
